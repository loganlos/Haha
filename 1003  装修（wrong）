	#include <stdio.h>
	#include "string.h"
	#include <stdlib.h>
	
	int compare(const void* e2, const void* e1)
	{
		int* p1 = (int*)e1;
		int* p2 = (int*)e2;
		if (*p1 > *p2)
		{
			return 1;
		}
		else if (*p1 == *p2)
		{
			return 0;
		}
		else if (*p1 < *p2)
		{
			return -1;
		}
	}
	
	int main()
	{
		int i,n,k,c,temp=0,ds=0,max=0,ed,st,flag=0,flag1=0,t=0,x[100001]={0},ch;
		char s[100001];
		scanf("%d",&c);
		while(c--)
		{
			scanf("%d %d",&n,&k);
			scanf("%s",&s);
			ed=0,st=n-1,flag=0,ds=0,max=0,temp=0,flag1=1,t=0;
			for(i=0;i<n;i++)
			{
				if(s[i]=='0') 
				{
					if(flag==0)//判断第一个0
					{
						st=i;
						flag=1;
					}
					flag1=0;
					ed=i;
					x[t]=x[t]+1;
				}
				else if(s[i]=='1')
				{
					if(max<x[t]) 
					{
						max=x[t];
					}
					if(flag1==0)
					{
						ds++;
						t++;
					}
					flag1=1;
				} 
			}
			if(s[n-1]=='0') ds++;
			if(ds<k)
			{
				ch=k-ds+1;
				while(k--)
				{
					qsort(x,t+1,4,compare);
					t++;
					if(x[0]%2==0)
					{
						x[t]=x[0]/2;
						x[0]=x[0]/2;
					}
					else
					{
						x[t]=x[0]/2;
						x[0]=x[0]-x[0]/2;
					}
				}
				qsort(x,t+1,4,compare);
				printf("%d\n",x[0]);
			}
			else if(ds==k) printf("%d\n",max);
			else
			{
				printf("%d\n",ed-st+1);
			}
		}
		return 0;
	}
